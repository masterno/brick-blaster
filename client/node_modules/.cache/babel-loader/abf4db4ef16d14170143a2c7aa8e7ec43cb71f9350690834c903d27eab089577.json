{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback, useEffect } from 'react';\nimport LevelManager from './LevelManager';\nexport const useGameLoop = (initialLives = 3) => {\n  _s();\n  const [isRunning, setIsRunning] = useState(false);\n  const [currentLevel, setCurrentLevel] = useState(1);\n  const [score, setScore] = useState(0);\n  const [lives, setLives] = useState(initialLives);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [isVictory, setIsVictory] = useState(false);\n  const [levelManager] = useState(() => new LevelManager());\n  let animationFrameId;\n  const loadLevel = gameObjects => {\n    const levelData = levelManager.loadLevel(currentLevel);\n    gameObjects.bricks = levelData.bricks;\n    gameObjects.ball.setSpeed(levelData.speed * 4); // Base speed multiplied by level speed\n    return levelData;\n  };\n  const resetGame = gameObjects => {\n    setCurrentLevel(1);\n    setScore(0);\n    setLives(initialLives);\n    setIsGameOver(false);\n    setIsVictory(false);\n    gameObjects.ball.reset();\n    gameObjects.paddle.reset();\n    loadLevel(gameObjects);\n  };\n  const handleBallOut = gameObjects => {\n    setLives(prev => {\n      const newLives = prev - 1;\n      if (newLives <= 0) {\n        setIsGameOver(true);\n        setIsVictory(false);\n        stop();\n      }\n      return newLives;\n    });\n\n    // Reset ball and paddle position if game isn't over\n    if (lives > 1) {\n      gameObjects.ball.reset();\n      gameObjects.paddle.reset();\n    }\n  };\n  const update = (ctx, gameObjects) => {\n    const {\n      ball,\n      paddle,\n      bricks = []\n    } = gameObjects;\n\n    // Clear canvas\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n\n    // Update game objects\n    ball.update();\n    paddle.update();\n\n    // Check if ball is out\n    if (ball.y + ball.radius > ctx.canvas.height) {\n      handleBallOut(gameObjects);\n      return;\n    }\n\n    // Check paddle collision\n    if (ball.checkCollision(paddle)) {\n      ball.bounceOffPaddle(paddle);\n    }\n\n    // Check brick collisions\n    bricks.forEach((brick, index) => {\n      if (!brick.broken && brick.checkCollision(ball)) {\n        ball.bounceOffBrick(brick);\n        if (brick.hit()) {\n          // Handle brick destruction\n          if (brick.type === 'explosive') {\n            // Destroy adjacent bricks\n            bricks.forEach(otherBrick => {\n              if (!otherBrick.broken && Math.abs(otherBrick.x - brick.x) <= brick.width * 2 && Math.abs(otherBrick.y - brick.y) <= brick.height * 2) {\n                otherBrick.broken = true;\n                setScore(prev => prev + 100);\n              }\n            });\n          }\n          setScore(prev => prev + (brick.type === 'durable' ? 150 : 100));\n        }\n      }\n    });\n\n    // Check if level is complete\n    if (levelManager.isLevelComplete(bricks)) {\n      if (currentLevel < levelManager.getMaxLevel()) {\n        setCurrentLevel(prev => prev + 1);\n        loadLevel(gameObjects);\n        // Reset ball and paddle position\n        ball.reset();\n        paddle.reset();\n      } else {\n        // Game complete - Victory!\n        setIsGameOver(true);\n        setIsVictory(true);\n        stop();\n      }\n    }\n\n    // Draw game objects\n    bricks.forEach(brick => brick.draw(ctx));\n    ball.draw(ctx);\n    paddle.draw(ctx);\n\n    // Draw HUD\n    drawHUD(ctx);\n  };\n  const drawHUD = ctx => {\n    ctx.font = '16px Arial';\n    ctx.fillStyle = '#FFFFFF';\n    ctx.textAlign = 'left';\n    ctx.fillText(`Score: ${score}`, 10, 20);\n    ctx.fillText(`Level: ${currentLevel}`, 10, 40);\n\n    // Draw lives\n    ctx.textAlign = 'right';\n    ctx.fillText(`Lives: ${lives}`, ctx.canvas.width - 10, 20);\n  };\n  const gameLoop = (ctx, gameObjects) => {\n    if (!isRunning) return;\n    update(ctx, gameObjects);\n    animationFrameId = window.requestAnimationFrame(() => gameLoop(ctx, gameObjects));\n  };\n  const start = useCallback((ctx, gameObjects) => {\n    setIsRunning(true);\n    loadLevel(gameObjects);\n    gameLoop(ctx, gameObjects);\n  }, []);\n  const stop = useCallback(() => {\n    setIsRunning(false);\n    window.cancelAnimationFrame(animationFrameId);\n  }, []);\n  return {\n    start,\n    stop,\n    score,\n    currentLevel,\n    lives,\n    isRunning,\n    isGameOver,\n    isVictory,\n    resetGame\n  };\n};\n_s(useGameLoop, \"R6Lgl1pxoOaF0LBOpshsQxJiFVw=\");\nexport default useGameLoop;","map":{"version":3,"names":["useState","useCallback","useEffect","LevelManager","useGameLoop","initialLives","_s","isRunning","setIsRunning","currentLevel","setCurrentLevel","score","setScore","lives","setLives","isGameOver","setIsGameOver","isVictory","setIsVictory","levelManager","animationFrameId","loadLevel","gameObjects","levelData","bricks","ball","setSpeed","speed","resetGame","reset","paddle","handleBallOut","prev","newLives","stop","update","ctx","clearRect","canvas","width","height","y","radius","checkCollision","bounceOffPaddle","forEach","brick","index","broken","bounceOffBrick","hit","type","otherBrick","Math","abs","x","isLevelComplete","getMaxLevel","draw","drawHUD","font","fillStyle","textAlign","fillText","gameLoop","window","requestAnimationFrame","start","cancelAnimationFrame"],"sources":["c:/Users/noahm/OneDrive/Desktop/Coding/brick_blaster2/client/src/components/Game/GameLoop.js"],"sourcesContent":["import { useState, useCallback, useEffect } from 'react';\nimport LevelManager from './LevelManager';\n\nexport const useGameLoop = (initialLives = 3) => {\n  const [isRunning, setIsRunning] = useState(false);\n  const [currentLevel, setCurrentLevel] = useState(1);\n  const [score, setScore] = useState(0);\n  const [lives, setLives] = useState(initialLives);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [isVictory, setIsVictory] = useState(false);\n  const [levelManager] = useState(() => new LevelManager());\n  let animationFrameId;\n\n  const loadLevel = (gameObjects) => {\n    const levelData = levelManager.loadLevel(currentLevel);\n    gameObjects.bricks = levelData.bricks;\n    gameObjects.ball.setSpeed(levelData.speed * 4); // Base speed multiplied by level speed\n    return levelData;\n  };\n\n  const resetGame = (gameObjects) => {\n    setCurrentLevel(1);\n    setScore(0);\n    setLives(initialLives);\n    setIsGameOver(false);\n    setIsVictory(false);\n    gameObjects.ball.reset();\n    gameObjects.paddle.reset();\n    loadLevel(gameObjects);\n  };\n\n  const handleBallOut = (gameObjects) => {\n    setLives(prev => {\n      const newLives = prev - 1;\n      if (newLives <= 0) {\n        setIsGameOver(true);\n        setIsVictory(false);\n        stop();\n      }\n      return newLives;\n    });\n\n    // Reset ball and paddle position if game isn't over\n    if (lives > 1) {\n      gameObjects.ball.reset();\n      gameObjects.paddle.reset();\n    }\n  };\n\n  const update = (ctx, gameObjects) => {\n    const { ball, paddle, bricks = [] } = gameObjects;\n    \n    // Clear canvas\n    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n    \n    // Update game objects\n    ball.update();\n    paddle.update();\n    \n    // Check if ball is out\n    if (ball.y + ball.radius > ctx.canvas.height) {\n      handleBallOut(gameObjects);\n      return;\n    }\n    \n    // Check paddle collision\n    if (ball.checkCollision(paddle)) {\n      ball.bounceOffPaddle(paddle);\n    }\n\n    // Check brick collisions\n    bricks.forEach((brick, index) => {\n      if (!brick.broken && brick.checkCollision(ball)) {\n        ball.bounceOffBrick(brick);\n        if (brick.hit()) {\n          // Handle brick destruction\n          if (brick.type === 'explosive') {\n            // Destroy adjacent bricks\n            bricks.forEach(otherBrick => {\n              if (!otherBrick.broken && \n                  Math.abs(otherBrick.x - brick.x) <= brick.width * 2 && \n                  Math.abs(otherBrick.y - brick.y) <= brick.height * 2) {\n                otherBrick.broken = true;\n                setScore(prev => prev + 100);\n              }\n            });\n          }\n          setScore(prev => prev + (brick.type === 'durable' ? 150 : 100));\n        }\n      }\n    });\n    \n    // Check if level is complete\n    if (levelManager.isLevelComplete(bricks)) {\n      if (currentLevel < levelManager.getMaxLevel()) {\n        setCurrentLevel(prev => prev + 1);\n        loadLevel(gameObjects);\n        // Reset ball and paddle position\n        ball.reset();\n        paddle.reset();\n      } else {\n        // Game complete - Victory!\n        setIsGameOver(true);\n        setIsVictory(true);\n        stop();\n      }\n    }\n    \n    // Draw game objects\n    bricks.forEach(brick => brick.draw(ctx));\n    ball.draw(ctx);\n    paddle.draw(ctx);\n\n    // Draw HUD\n    drawHUD(ctx);\n  };\n\n  const drawHUD = (ctx) => {\n    ctx.font = '16px Arial';\n    ctx.fillStyle = '#FFFFFF';\n    ctx.textAlign = 'left';\n    ctx.fillText(`Score: ${score}`, 10, 20);\n    ctx.fillText(`Level: ${currentLevel}`, 10, 40);\n    \n    // Draw lives\n    ctx.textAlign = 'right';\n    ctx.fillText(`Lives: ${lives}`, ctx.canvas.width - 10, 20);\n  };\n\n  const gameLoop = (ctx, gameObjects) => {\n    if (!isRunning) return;\n    \n    update(ctx, gameObjects);\n    animationFrameId = window.requestAnimationFrame(() => gameLoop(ctx, gameObjects));\n  };\n\n  const start = useCallback((ctx, gameObjects) => {\n    setIsRunning(true);\n    loadLevel(gameObjects);\n    gameLoop(ctx, gameObjects);\n  }, []);\n\n  const stop = useCallback(() => {\n    setIsRunning(false);\n    window.cancelAnimationFrame(animationFrameId);\n  }, []);\n\n  return { \n    start, \n    stop, \n    score,\n    currentLevel,\n    lives,\n    isRunning,\n    isGameOver,\n    isVictory,\n    resetGame\n  };\n};\n\nexport default useGameLoop;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}